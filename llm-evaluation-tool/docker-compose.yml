version: '3.8'

services:
  llm-eval:
    build: .
    container_name: llm-evaluation-tool
    ports:
      - "8080:8080"
    volumes:
      # Mount dataset directory
      - ./data:/app/data
      # Mount database directory for persistence
      - ./database:/app/database
    environment:
      # Security
      - SECRET_KEY=${SECRET_KEY:-dev-secret-key-please-change-in-production}

      # Paths
      - DATABASE_PATH=/app/database/evaluations.db
      - DATASET_PATH=/app/data/sample_dataset.json

      # Server configuration
      - PORT=8080
      - HOST=0.0.0.0
      - DEBUG=False
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "python", "-c", "import requests; requests.get('http://localhost:8080')"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s
